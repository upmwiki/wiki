---
prev:
   text: 2. Седловые точки в антагонистических играх
   link: ../02
next:
   text: 4. Смешанное расширение игры (продолжение)
   link: ../04
---

**Лекция 3**

# Существование равновесия в чистых стратегиях. Смешанное расширение игры

Сегодня наша задача — закончить антагонистические игры и, возможно, начать смешанные стратегии.

## Существование равновесия в чистых стратегиях

Начнём с доказательства леммы об основном неравенстве минимакса.

:::: info ЛЕММА (ОБ ОСНОВНОМ НЕРАВЕНСТВЕ МИНИМАКСА)
В любой антагонистической игре нижняя цена игры не больше верхней цены игры:

$$\underline{v} \le \overline{v}$$

или, что то же самое,

$$
\sup_{x \in X} \inf_{y \in Y} H(x, y) \le \inf_{y \in Y} \sup_{x \in X} H(x, y).
$$

*Про существование седловой точки это ничего не говорит.*

::: info Доказательство
Пусть у нас есть некая функция $H(x, y)$ и пусть $x \in X$ — некая произвольная стратегия первого игрока.

Про эту стратегию $x$ можно сказать следующее: для неё значение функции выигрыша не превышает соответствующий супремум по $x$:

$$
H(x, y) \le \sup\limits_{x \in X} H(x, y).
$$

В свою очередь,

$$
\inf\limits_{y \in Y} H(x, y) \le \inf\limits_{y \in Y} \underbrace{\sup\limits_{x \in X} H(x, y)}_\text{const} = \overline{v},
$$

а также, с другой стороны,

$$
\underline{v} = \sup\limits_{x \in X} \underbrace{ \inf\limits_{y \in Y} H(x, y) }_\text{const} \le \inf\limits_{y \in Y} H(x, y).
$$

Таким образом,

$$
\sup\limits_{x \in X} \inf\limits_{y \in Y} H(x, y) \le \inf\limits_{y \in Y} \sup\limits_{x \in X} H(x, y)
$$

или, согласно определениям нижней и верхней цен игры,

$$
\underline{v} \le \overline{v}.
$$

Лемма доказана.

:::

::::

Пусть $Z(\Gamma) \subset X \times Y$ — множество ситуаций равновесия (в антагонистической игре это просто множество седловых точек, если они существуют). Для матричной игры $Z$ — множество седловых точек.

:::: info ЛЕММА (О МАСШТАБЕ)
Пусть $\Gamma = \langle X, ~ Y, ~ H \rangle$ и $\Gamma' = \langle X, ~ Y, ~ H' \rangle$ — две антагонистические игры, причём $H' = \beta \cdot H + \alpha$, где $\alpha, \beta = \text{const}$, $\beta > 0$. Тогда $Z(\Gamma') = Z(\Gamma)$, $v_{\Gamma'} = \beta v_\Gamma + \alpha$.

::: info Доказательство

Надо доказать, что если любая седловая точка является ситуаций равновесия в игре $\Gamma$, то она — ситуация равновесия и в игре $\Gamma'$, и наоборот.

1. Пусть $(x^*, y^*)$ — ситуация равновесия в игре $\Gamma$, т. е. $(x^*, y^*) \in Z(\Gamma)$. Тогда

   $$
   H(x, y^*) \le H(x^*, y^*) \le H(x^*, y).
   $$

   Умножим неравенство на $\beta$:
   
   $$
   \beta H(x, y^*) \le H(x^*, y^*) \le H(x^*, y).
   $$

   Поскольку $\beta > 0$, то знаки не меняются.

   Прибавим к неравенству $\alpha$:

   $$
   \beta H(x, y^*) + \alpha \le H(x^*, y^*) + \alpha \le H(x^*, y) + \alpha.
   $$

   По условию получаем, что это неравенство эквивалентно следующему:

   $$
   H'(x, y^*) \le H'(x^*, y^*) \le H'(x^*, y).
   $$

2. Пусть $(x^*, y^*) \in Z(\Gamma')$. Тогда

   $$
   H'(x, y^*) \le H'(x^*, y^*) \le H'(x^*, y).
   $$

   Можно сказать, что

   $$
   H(x^*, y^*) = {1 \over \beta} H'(x^*, y^*) - {\alpha \over \beta},
   \tag{∗}
   $$

   поскольку из $H' = \beta H + \alpha$ следует, что $H = {1 \over \beta} H' - {\alpha \over \beta}$.

   Умножим неравенство выше на ${1 \over \beta}$:

   $$
   {1 \over \beta} H'(x, y^*) \le {1 \over \beta} H'(x^*, y^*) \le H'(x^*, y).
   $$

   Поскольку ${1 \over \beta} > 0$, то знак при умножении не изменится.

   Вычтем из неравенства ${\alpha \over \beta}$:

   $$
   {1 \over \beta} H'(x, y^*) - {\alpha \over \beta} \le {1 \over \beta} H'(x^*, y^*) - {\alpha \over \beta} \le H'(x^*, y) - {\alpha \over \beta}.
   $$

   Согласно $(∗)$ получаем, что данное неравенство эквивалентно следующему:

   $$
   H(x, y^*) \le H(x^*, y^*) \le H(x^*, y).
   $$

Лемма доказана.
:::
::::

Данная лемма говорит о том, что две игры $\Gamma$ и $\Gamma'$ стратегически эквивалентны в том плане, что и там и там будут одинаковые выигрышные стратегии, независимо от того, в каких единицах вы измеряете выигрыш. Главное, чтобы всё было умножено на одно число, и неважно, какое начало отсчёта у этих выигрышей. То есть матричную игру можно умножить на любое число или прибавить ко всем её элементам одинаковое число — выигрышные стратегии от этого не меняются, потому что эти преобразования сохраняют соотношения между соответствующими $H$.

А теперь основная теорема.

:::: info ТЕОРЕМА (О СУЩЕСТВОВАНИИ РАВНОВЕСИЯ В ЧИСТЫХ СТРАТЕГИЯХ)
Для того, чтобы в игре $\Gamma = \langle X, ~ Y, ~ H \rangle$ существовала ситуация равновесия, необходимо и достаточно, чтобы существовали минимакс и максимин, и нижняя цена игры $\underline{v} = \sup\limits_{x \in X} \inf\limits_{y \in Y} H(x, y)$ была равна

$$
\underline{v} = \sup_{x \in X} \inf_{y \in Y} H(x, y) = \inf_{y \in Y} \sup_{x \in X} H(x, y) = \overline{v}.
$$

*Иначе говоря, для того чтобы была ситуация равновесия (например, седловая точка в матричной игре), нужно, чтобы существовал минимакс и максимин (т. е. существовали нижняя и верхняя цены игры), и они должны быть равны друг другу. Тогда имеется точка равновесия в чистых стратегиях, т. е. такое решение, которого ни одному из игроков в одностороннем порядке не выгодно отклоняться. И наоборот.*

::: info Доказательство

1. *Доказательство необходимости.* Пусть $(x^*, y^*) \in Z(\Gamma)$ — ситуация равновесия. Тогда, по определению,

   $$
   H(x, y^*) \le H(x^*, y^*) \le H(x^*, y).
   $$

   Левая часть неравенства эквивалентна следующему:

   $$
   \sup\limits_{x \in X} H(x, y^*) = H(x^*, y^*),
   $$

   то есть если есть такая $x^*$, что она кроет все ваши другие иксы, то тогда точная верхняя грань этой штуки будет равна $H(x^*, y^*)$.

   Но в то же время если это так, то тогда если возьмём от супремума инфинум по $y$, то:

   $$
   \inf_{y \in Y} \sup_{x \in X} H(x, y^*) \le \sup_{x \in X} H(x, y^*),
   $$

   а $\inf\limits_{y \in Y} \sup\limits_{x \in X} H(x, y^*) = \overline{v}$, т. е. получаем, что

   $$
   \overline{v} \le H(x^*, y^*).
   $$

   С другой стороны (по похожей логике, рассматривая правую часть неравенства),

   $$
   H(x^*, y^*) = \inf_{y \in Y} H(x^*, y) \le \sup_{x \in X} \inf_{y \in Y} H(x^*, y) = \underline{v}.
   $$

   Таким образом мы получили, что $\overline{v} \le \underline{v}$. Но, согласно лемме об основном неравенстве минимакса, $\overline{v} \ge \underline{v}$. Следовательно,

   $$
   \overline{v} = \underline{v}.
   $$

2. *Доказательство достаточности.* Надо доказать, что если существуют минимакс и максимин и выполняется равенство $\overline{v} = \underline{v}$, то из этого следует, что существует ситуация равновесия.

   Пусть существует некая точка $(x^*, y^*)$. Можно сказать, что

   $$
   H(x^*, y^*) = \inf_{y \in Y} H(x^*, y).
   $$

   Но у нас не только по условию это неравенство выполняется, у нас существует минимакс и максимин, а значит, что если $(x^*, y^*)$ — это то, что соответствует минимаксу или максимину, то тогда это будет равно

   $$
   H(x^*, y) \ge \inf_{y \in Y} H(x^*, y) = \sup_{x \in X} \inf_{y \in Y} H(x, y).
   $$

   $x^*$ соответствует максиминной стратегии. Напомню, что для того, чтобы была максиминная и минимаксная стратегия, достаточно, чтобы у одного игрока была такая история, которая позволяет ему максимизировать свой наибольший проигрыш. То есть существование такой стратегии позволяет нам записать это равенство.

   То есть сначала мы говорим, что $H(x^*, y) \ge \inf\limits_{y \in Y} H(x^*, y)$ верно вообще для всех $x^*$, а вот существование максимина говорит о том, что $\inf\limits_{y \in Y} H(x^*, y) = \sup\limits_{x \in X} \inf\limits_{y\in Y} H(x,y)$.

   И тогда для второй стратегии $y^*$, которая минимаксная, мы можем сказать, что

   $$
   H(x, y^*) \le \sup_{x \in X} H(x, y^*) = \inf_{y \in Y} \sup_{x \in X} H(x, y).
   $$

   $H(x, y^*) \le \sup\limits_{x \in X} H(x, y^*)$ — точно верно, но в силу того, что $y^*$ — это минимаксная стратегия, то значит, $\sup\limits_{x\in X} H(x, y^*) = \inf\limits_{y \in Y} \sup\limits_{x \in X} H(x, y)$.

   По условию, $\sup\limits_{x \in X} \inf\limits_{y \in Y} H(x,y) = \inf\limits_{y \in Y} \sup\limits_{x \in X} H(x, y)$, а раз они равны, то

   $$
   H(x, y^*) \le H(x^*, y^*) \le H(x^*, y).
   $$

   И это означает, что $(x^*, y^*)$ — ситуация равновесия, т. е. $(x^*, y^*) \in Z(\Gamma)$.

Теорема полностью доказана.
:::

::::

Вот, собственно всё.

Всё, что можно сказать об играх в чистых стратегиях, мы сегодня и сказали. Мы сказали, что:
1. В играх в чистых стратегиях верхняя цена игры не может быть меньше нижней цены игры.
   $$
   \overline{v} \ge \underline{v}.
   $$
2. Функцию выигрыша можно масштабировать: умножать на положительное число, прибавлять ко всем значениям функции выигрыша одно и то же число.
3. Если нужно, чтобы в антагонистической игре в чистых стратегиях существовала ситуация равновесия, то тогда для этого необходимо и достаточно, чтобы существовали минимакс и максимин, и чтобы они были равны ($\overline{v} = \underline{v}$). В таком случае решение игры есть.

   * Игры, в которых это всё выполняется, называются **вполне определёнными**.

     > Игра называется *вполне определённой*, если в ней существует седловая точка (или ситуация равновесия).

На этом чистые стратегии заканчиваем. Поговорим о "грязных" стратегиях.


## Смешанное расширение игры

Смешанное расширение игры имеет значение тогда, когда *не существует* (по предыдущей теореме) точки равновесия, в которой есть равные друг другу максимин и минимакс.

В данном случае есть нижняя ($\underline{v}$) и верхняя ($\overline{v}$) цена игры, которые удовлетворяют неравенству:

$$
\begin{matrix}
\underline{v} = \inf\limits_{y \in Y} \sup\limits_{x \in X} H(x, y) < \sup\limits_{x \in X} \inf\limits_{y \in Y} H(x, y) = \overline{v} \implies \\
\implies \overline{v} - \underline{v} > 0.
\end{matrix}
$$

Это значит, что в смешанных стратегиях не существует ситуации равновесия. Значит, нет такой стратегии, которой можно было бы спокойно придерживаться и в одностороннем порядке от неё не отступать, то есть всегда найдётся такая стратегия, которую можно заменить. Или, условно говоря, если у вас есть стратегия, которую вы придерживаетесь и вы сообщаете об этом своему противнику, то он, зная, какой вы придерживаетесь стратегии, меняет свою и оказывается в более выгодной ситуации.

Например, рассмотрим матрицу игры
$$
H = \begin{bmatrix}
7 & 3 \\ 2 & 5
\end{bmatrix}.
$$

Понятно, что можно посмотреть на всё это дело со стороны первого игрока. Он выбирает себе строки. Если выбирает первую, то минимальный выигрыш — 3, а если вторую — то 2. Первая стратегия нравится больше, и, соответственно, нижняя цена игры $\underline{v} = 3$. 

А если смотреть со стороны второго игрока, то он выбирает столбцы. Если выбирает первый, то тогда максимальный проигрыш — 7, а если второй, то максимальный проигрыш — 5, поэтому вторая стратегия нравится больше, и верхняя цена игры $\overline{v} = 5$.

Таким образом, $\underline{v} < \overline{v}$, а значит, нет седловой точки.

Посмотрим на саму игру. Если смотреть со стороны первого игрока, то для него есть максиминная стратегия. Ему выгоднее использовать стратегию 1<!--, потому что в этом случае второй игрок, как бы он ни выбирал, в любом случае получит 3 (?)-->.

Если первый игрок играет первую стратегию, а второй игрок играет вторую, то тогда они сойдутся между $3$ и $5$. Но пусть теперь первый игрок узнал, что второй выбирает вторую стратегию — тогда первому выгоднее поменять стратегию на вторую.

То есть если бы это была ситуация равновесия, то все элементы в этом столбце должны были бы быть меньше. А поскольку здесь её нет, то тогда получается, что если первый игрок узнал, что второй игрок играет эту стратегию, то он может поменять свою на вторую и оказаться в более выгодной ситуации. И наоборот.

Иначе говоря, хотя бы одному игроку выгодно отклониться от своей стратегии в одностороннем порядке. И тогда вводится следующее определение.

::: info ОПРЕДЕЛЕНИЕ
Случайная величина, значениями которой являются (чистые) стратегии игрока, называется его **смешанной стратегией**.
:::

Строго говоря, мы можем предъявить следующую величину, которая является смешанной стратегией:

$$
\vec{X}_m = \left[p_1, p_2, ..., p_n\right],
$$

если $|X| = n$, $\sum\limits_{k=1}^n p_k = 1$.

Если у нас в множестве стратегий первого игрока всего $n$ элементов, т. е. оно конечно (и то же самое про множество стратегий второго игрока), т. е. имеем классическую матричную игру, тогда смешанная стратегия первого игрока является вектором, в котором $n$ мест, и на каждом месте стоит число от 0 до 1, и, более того, сумма всех этих чисел равна единице.

Как это можно интерпретировать? На $k$-ом месте в этом векторе стоит вероятность того, что игрок сыграет стратегию с номером $k$, и таким образом, например, вектор типа

$$
X_k = \left[ 0, 0, ..., 0, 1, 0, ..., 0, 0 \right],
$$

где единица стоит на $k$-ом месте, будет обозначать просто чистую $k$-ю стратегию. То есть получается, что слово *расширение* не просто так — мы расширяем понятие игры на случай смешанных стратегий, и случай чистых стратегий является частным случаем.

И тогда что игрок выигрывает, играя эту стратегию? Он выигрывает

$$
p_1 \cdot H(x_1, y) + p_2 \cdot H(x_2, y) + \cdots + p_n \cdot H(x_n, y),
$$

и это — *математическое ожидание*, то есть первый игрок в при выборе данной стратегии выиграет математическое ожидание

$$
\forall y: ~ E[H(x, y)] = p_1 \cdot H(x_1, y) + p_2 \cdot H(x_2, y) + \dots + p_n \cdot H(x_n, y).
$$

С точки зрения игры это — ожидаемый выигрыш, но на самом деле здесь возникает много различных парадоксов.

Можно заметить, что это — некая выпуклая комбинация функций выигрыша, и мы её максимизируем. То есть мы подбираемся к задаче линейного программирования. То есть $H$ нам известна — это наши коэффициенты, и мы выбираем такие $p$, чтобы максимизировать эту штуку. Но мы пока не говорим про второго игрока — у него стратегия вообще может быть чистая.

И основное утверждение банальной теории игр заключается в том, что что бы ни случилось, но **в смешанных стратегиях всегда есть ситуация равновесия**.