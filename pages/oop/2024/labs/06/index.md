---
prev:
    link: ../05
    text: 5. Сериализация
next: false
---

**Лабораторная работа 6**

# Шаблоны проектирования

## Задание

Реализуйте задание на языке C# с использованием указанного шаблона проектирования.

### Варианты

1. **Фабричный метод (Factory method).** Реализуйте систему доставки еды, в которой используются различные транспортные средства (велосипеды, скутеры, автомобили) в зависимости от расстояния доставки. Используйте фабричный метод для создания объектов транспортных средств.

2. **Абстрактная фабрика (Abstract factory).** Разработайте систему пользовательского интерфейса, которая может создавать элементы (кнопки, поля ввода, чекбоксы) для разных платформ (Windows, macOS, Linux). Используйте абстрактную фабрику для реализации.

3. **Одиночка (Singleton).** Создайте систему управления настройками приложения, где все настройки хранятся в одном объекте (одиночке). Обеспечьте возможность глобального доступа к этому объекту.

4. **Стратегия (Strategy).** Реализуйте калькулятор стоимости доставки, который может использовать разные стратегии расчета стоимости (по расстоянию, по весу, фиксированная цена). Позвольте пользователю выбирать стратегию в зависимости от типа заказа.

5. **Декоратор (Decorator).** Создайте систему заказа кофе. Реализуйте базовый класс "Кофе" и декораторы для добавления ингредиентов (например, молоко, сахар, сироп). Каждое дополнение должно изменять цену и описание напитка.

6. **Адаптер (Adapter / Wrapper).** Напишите программу для чтения данных из разных источников (JSON-файлы, XML-файлы). Используйте адаптеры для унификации работы с этими форматами.

7. **Мост (Bridge).** Разработайте приложение для рисования, где графические фигуры (например, круги, прямоугольники) могут быть выведены на разных устройствах (например, принтер, экран). Используйте шаблон "Мост" для разделения абстракции (фигура) и реализации (устройство).

8. **Команда (Command).** Реализуйте приложение для управления умным домом. Каждое устройство (например, лампа, кондиционер) должно выполнять команды (включение, выключение). Обеспечьте возможность отмены последней команды.

9. **Наблюдатель (Observer).** Напишите новостное приложение, где подписчики получают уведомления о новых статьях. Добавьте возможность подписываться и отписываться от новостей.

10. **Посредник (Mediator).** Создайте систему управления чатом, где посредник (объект "Чат") отвечает за передачу сообщений между пользователями. У каждого пользователя должна быть возможность отправлять сообщения через посредника.

11. **Итератор (Iterator).** Реализуйте класс для коллекции книг, которая поддерживает итерацию по книгам. Добавьте возможность фильтрации (например, по автору или жанру) с использованием итераторов.

12. **Компоновщик (Composite).** Разработайте файловую систему, где папки и файлы представляют собой единый интерфейс. Реализуйте операции для отображения структуры директорий.

13. **Шаблонный метод.** Реализуйте процесс приготовления напитков (например, чай, кофе) с использованием шаблонного метода. Общие этапы приготовления должны быть описаны в базовом классе.

14. **Цепочка обязанностей (Chain of responsibility).** Напишите обработчик запросов, который проходит через цепочку проверок (например, проверка авторизации, валидация данных). Если одна из проверок не проходит, запрос должен быть отклонен.

15. **Прототип (Prototype).** Реализуйте редактор графики, в котором фигуры можно клонировать. Добавьте возможность клонирования объектов с их текущими свойствами (например, цвет, размер).

16. **Заместитель (Proxy).** Напишите систему управления доступом, где реальные объекты (например, файлы) защищены заместителем, проверяющим права доступа.

17. **Состояние (State).** Разработайте модель работы светофора, который меняет свое состояние (зеленый, желтый, красный). Реализуйте каждый цвет как отдельное состояние.

18. **Хранитель (Memento).** Реализуйте шаблон проектирования Memento для управления состоянием игрового персонажа. Это позволит игрокам сохранять и загружать состояние персонажа. В игре у персонажа есть атрибуты здоровья, атаки и защиты. Игрок может сохранить состояние персонажа перед попыткой прохождения сложного уровня. Если персонаж побежден, игрок может восстановить сохраненное состояние.

19. **Интерпретатор (Interpreter).** Реализуйте простой калькулятор для математических выражений (например, "3 + 5 * 2"), используя шаблон "Интерпретатор".

20. **Посетитель (Visitor).** Создайте иерархию классов для элементов магазина (например, книги, электроника). Используйте посетителя для расчета стоимости товаров с учетом скидок.

21. **Фабричный метод (Factory method).** Реализуйте систему управления транспортом. Создайте базовый интерфейс IVehicle с методом Drive. Реализуйте фабричный метод, который создает объекты Car, Bike или Truck в зависимости от предоставленного типа транспорта.

22. **Декоратор (Decorator).** Создайте систему, которая позволяет кастомизировать пиццу. Базовый класс Pizza предоставляет стандартное описание. Реализуйте декораторы для добавления ингредиентов (сыр, грибы, колбаса), которые изменяют описание и цену.

23. **Наблюдатель (Observer).** Разработайте систему уведомлений для изменения температуры. Класс TemperatureSensor генерирует изменения, а классы EmailNotifier и SMSNotifier реагируют на изменения.

24. **Стратегия (Strategy).** Реализуйте систему для расчета стоимости поездки в зависимости от выбранного способа передвижения: такси, метро, велосипед. Используйте шаблон "Стратегия" для выбора алгоритма расчета.

25. **Цепочка обязанностей (Chain of responsibility).** Напишите обработчик банковских транзакций, где запрос проходит через цепочку проверок (баланс, лимит операций, доступность банка).

26. **Мост (Bridge).** Создайте систему вывода графиков. Классы графиков (например, линейный, гистограмма) должны быть независимы от платформ (например, Windows, macOS). Используйте шаблон "Мост".

27. **Хранитель (Memento).** Напишите класс графического редактора, который позволяет сохранять и восстанавливать состояние холста (например, после изменения рисунка). После выполнения различных действий, таких как перемещение фигур, раскрашивание, изменение размера и т. д., пользователь может захотеть отменить некоторые изменения или вернуть обратно отменённые.

28. **Посредник (Mediator).** Реализуйте систему чата, где объект посредника управляет взаимодействием между пользователями.

29. **Состояние (State).** Смоделируйте банкомат, где разные состояния (ввод пин-кода, выбор операции, выдача денег) представлены отдельными классами.

30. **Посетитель (Visitor).** Создайте систему для расчета стоимости элементов корзины покупателя (например, книги, электроника) с учетом различных налогов для каждого типа товара.


### Пример 1

**Стратегия (Stragegy).** Реализуйте определение стоимости автомобиля с учётом разных тарифов: стратегии фиксированной стоимости и стратегии со скидкой.

::: code-group

<<< ./snippets/01.cs {c#} [C#]

``` :no-line-numbers [Результат выполнения]
Fixed Pricing: 500
Discounted Pricing: 450
```

:::

### Пример 2

**Цепочка обязанностей.** Создайте систему обработки запросов на доступ к ресурсу. Система должна проверять:
1. уровень доступа пользователя;
2. наличие действующего токена;
3. соответствие ресурса доступу пользователя.

::: code-group

<<< ./snippets/02.cs {c#} [C#]

``` :no-line-numbers [Результат выполнения]
Processing access for Admin to File:
Access Level Check: Passed
Token Check: Valid
Resource Check: Passed
Access Granted.
```

:::

### Пример 3

**Хранитель.** Реализуйте класс текстового редактора, который позволяет сохранять и восстанавливать состояние документа с помощью хранилища.

::: code-group

<<< ./snippets/03.cs {c#} [C#]

``` :no-line-numbers [Результат выполнения]
Current Text: Hello, World!
After Undo: Hello, World!
After Another Undo: Hello
```

:::